<?xml version="1.0"?>
<tool id="hmmer.hmmalign" name="hmmalign" version="@WRAPPER_VERSION@.0">
  <description>align sequences to a profile HMM</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <command><![CDATA[
hmmalign

$trim
$input_format_select
--outformat $outformat

$hmmfile
$seq
> $output
      ]]></command>
  <inputs>
      <param name="seq" type="data" format="fasta"
          label="Sequence to align against model" />
      <param name="hmmfile" type="data" label="HMM model" />


      <!-- mapali -->
      <param name="trim" type="boolean" truevalue="--trim"
          label="trim terminal tails of nonaligned residues from alignment"
          help="(--trim)" falsevalue="" />

      <param name="input_format_select" type="select" label="Format of sequence and model">
          <option value="" selected="true">Guess Format</option>
          <option value="--amino">Protein</option>
          <option value="--dna">DNA</option>
          <option value="--rna">RNA</option>
      </param>

      <param name="outformat" type="select" label="Format of Output file">
          <option value="Stockholm">Stockholm</option>
          <option value="Pfam">Pfam</option>
          <option value="A2M">A2M</option>
          <option value="PSIBLAST">PSIBLAST</option>
      </param>

  </inputs>
  <outputs>
    <data format="sto" name="output" label="Alignment of $seq.name to $hmmfile.name">
        <change_format>
            <when input="outformat" value="Stockholm" format="stockholm" />
            <when input="outformat" value="A2M" format="txt" />
            <when input="outformat" value="PSIBLAST" format="txt" />
        </change_format>
    </data>
  </outputs>
  <tests>
      <test>
          <param name="hmmfile" value="globins4.hmm" />
          <param name="seq" value="globins45.fa" />
          <output name="output" file="globins-45-align.sto" lines_diff="20"/>
      </test>
  </tests>
  <help><![CDATA[
**What it does**

profile HMM construction from multiple sequence alignments

@ATTRIBUTION@
]]></help>
    <expand macro="citation" />
</tool>
