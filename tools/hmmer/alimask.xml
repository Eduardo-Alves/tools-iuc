<?xml version="1.0"?>
<tool id="hmmer.alimask" name="alimask" version="@WRAPPER_VERSION@.0">
  <description>append modelmask line to a multiple sequence alignments</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <command><![CDATA[

alimask

#if $range_type.range_type_select == "model":
    #set range = ','.join( [ str($range.modelrange) for $range in $range_type.modelranges])
    --modelrange $range
#else
    #set range = ','.join( [ str($range.alirange) for $range in $range_type.aliranges])
    --alirange $range
#end if

@FORMAT_SELECTOR@
@MCSS@
@ARSWS@
@SEED@

$msafile
$output
      ]]></command>
  <inputs>
    <param name="msafile" type="data" label="MSA File" format="stockholm"/>
    <conditional name="range_type">
        <param name="range_type_select" type="select"
            label="Input range coordinate basis">
            <option value="model">Range in model coordinates</option>
            <option value="ali">Range in alignment coordinates</option>
        </param>
        <when value="model">
            <repeat min="1" name="modelranges" title="Model Ranges">
                <param label="Model Range" name="modelrange" type="text" value="10-20"/>
            </repeat>
        </when>
        <when value="ali">
            <repeat min="1" name="aliranges" title="Alignment Ranges">
                <param label="Alignment Range" name="alirange" type="text" value="10-20"/>
            </repeat>
        </when>
    </conditional>

    <!-- TODO: support model2ali/ali2model as separate utilities? -->
    <expand macro="format_selector"/>
    <expand macro="mcss"/>
    <expand macro="arsws"/>
    <expand macro="seed"/>
  </inputs>
  <outputs>
    <data format="stockholm" name="output" label="Output MSA"/>
  </outputs>
  <tests>
    <test>
      <param name="msafile" value="globins4.sto"/>
      <param name="modelrange" value="10-20" />
      <expand macro="seed_test" />
      <output name="output" file="globins-masked.sto" lines_diff="4"/>
    </test>
  </tests>
  <help><![CDATA[
**What it does**

Modifies alignment file to mask column ranges.

@ATTRIBUTION@
]]></help>
  <expand macro="citation"/>
</tool>
