<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>VCF/BCF conversion, view, subset and filter VCF/BCF files.</description>
  <expand macro="requirements"/>
  <expand macro="version_command"/>
  <expand macro="stdio"/>
  <macros>
    <token name="@EXECUTABLE@">view</token>
    <import>bcftools_macros.xml</import>
  </macros>
  <command>bcftools @EXECUTABLE@

## Default section
${sec_default.drop_genotypes}
${sec_default.header_only}
${sec_default.no_header}
--compression-level "${sec_default.compression_level}"
--output-file "${sec_default.output_file}"
--output-type "${sec_default.select_output_type}"
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
--regions "${values_sec_default_regions}"
--regions-file "${sec_default.regions_file}"
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
--targets "${values_sec_default_targets}"
--targets-file "${sec_default.invert_targets_file}${sec_default.targets_file}"
${sec_default.trim_alt_alleles}
${sec_default.no_update}
#set values_sec_default_samples = '","'.join([str($value) for $value in $sec_default.samples_repeat])
--samples "${sec_default.invert_samples}${values_sec_default_samples}"
--samples-file "${sec_default.invert_samples_file}${sec_default.samples_file}"
${sec_default.force_samples}
--min-ac "${sec_default.min_ac}"
--max-ac "${sec_default.max_ac}"
#set values_sec_default_apply_filters = '","'.join([str($value) for $value in $sec_default.apply_filters_repeat])
--apply-filters "${values_sec_default_apply_filters}"
--genotype "${sec_default.select_genotype}"
--include "${sec_default.include}"
--exclude "${sec_default.exclude}"
${sec_default.known}
${sec_default.novel}
--min-alleles "${sec_default.min_alleles}"
--max-alleles "${sec_default.max_alleles}"
${sec_default.phased_exclude_phased}
--min-af "${sec_default.min_af}"
--max-af "${sec_default.max_af}"
${sec_default.uncalled_exclude_uncalled}
#set values_sec_default_types_exclude_types = '","'.join([str($value) for $value in $sec_default.types_exclude_types_repeat])
--types_exclude-types "${values_sec_default_types_exclude_types}"
${sec_default.private_exclude_private}
</command>
  <inputs>
    <section expanded="true" name="sec_default" title="Default Options">
      <param falsevalue="" help="drop individual genotype information (after subsetting if -s option set)" label="Drop Genotypes" name="drop_genotypes" truevalue="--drop-genotypes" type="boolean"/>
      <param falsevalue="" help="print the header only/suppress the header in VCF output" label="Header Only" name="header_only" truevalue="--header-only" type="boolean"/>
      <param falsevalue="" help="print the header only/suppress the header in VCF output" label="No Header" name="no_header" truevalue="--no-header" type="boolean"/>
      <param help="compression level: 0 uncompressed, 1 best speed, 9 best compression [-1]" label="Compression Level" name="compression_level"/>
      <param format="data" help="output file name [stdout]" label="Output File" name="output_file" optional="True" type="data"/>
      <param name="select_output_type" type="select">
        <option value="b">compressed BCF</option>
        <option value="u">uncompressed BCF</option>
        <option value="z">compressed VCF</option>
        <option selected="True" value="v">uncompressed VCF</option>
      </param>
      <repeat name="regions_repeat" title="Regions">
        <param help="restrict to comma-separated list of regions" label="Regions" name="regions"/>
      </repeat>
      <param format="data" help="restrict to regions listed in a file" label="Regions File" name="regions_file" optional="True" type="data"/>
      <repeat name="targets_repeat" title="Targets">
        <param help="similar to -r but streams rather than index-jumps. Exclude regions with &quot;^&quot; prefix" label="Targets" name="targets"/>
      </repeat>
      <param format="data" help="similar to -R but streams rather than index-jumps. Exclude regions with &quot;^&quot; prefix" label="Targets File" name="targets_file" optional="True" type="data"/>
      <param falsevalue="" help="inverts the query/filtering applied by Targets File" label="Invert Targets File" name="invert_targets_file" truevalue="^" type="boolean"/>
      <param falsevalue="" help="trim alternate alleles not seen in the subset" label="Trim Alt Alleles" name="trim_alt_alleles" truevalue="--trim-alt-alleles" type="boolean"/>
      <param falsevalue="" help="do not (re)calculate INFO fields for the subset (currently INFO/AC and INFO/AN)" label="No Update" name="no_update" truevalue="--no-update" type="boolean"/>
      <repeat name="samples_repeat" title="Samples">
        <param help="comma separated list of samples to include (or exclude with &quot;^&quot; prefix)" label="Samples" name="samples"/>
      </repeat>
      <param falsevalue="" help="inverts the query/filtering applied by Samples" label="Invert Samples" name="invert_samples" truevalue="^" type="boolean"/>
      <param format="data" help="file of samples to include (or exclude with &quot;^&quot; prefix)" label="Samples File" name="samples_file" optional="True" type="data"/>
      <param falsevalue="" help="inverts the query/filtering applied by Samples File" label="Invert Samples File" name="invert_samples_file" truevalue="^" type="boolean"/>
      <param falsevalue="" help="only warn about unknown subset samples" label="Force Samples" name="force_samples" truevalue="--force-samples" type="boolean"/>
      <param default="nref" help="minimum/maximum count for non-reference (nref), 1st alternate (alt1), least frequent (minor), most frequent (major) or sum of all but most frequent (nonmajor) alleles" label="Min Ac" name="min_ac" optional="True" type="integer"/>
      <param default="nref" help="minimum/maximum count for non-reference (nref), 1st alternate (alt1), least frequent (minor), most frequent (major) or sum of all but most frequent (nonmajor) alleles" label="Max Ac" name="max_ac" optional="True" type="integer"/>
      <repeat name="apply_filters_repeat" title="Apply Filters">
        <param help="require at least one of the listed FILTER strings (e.g. &quot;PASS,.&quot;)" label="Apply Filters" name="apply_filters"/>
      </repeat>
      <param name="select_genotype" type="select">
        <option value="require one or more hom/het/missing genotype or"/>
        <option value="if prefixed with &quot;^&quot;"/>
        <option value="exclude sites with hom/het/missing genotypes"/>
      </param>
      <param help="select/exclude sites for which the expression is true (see man page for details)" label="Include" name="include"/>
      <param help="select/exclude sites for which the expression is true (see man page for details)" label="Exclude" name="exclude"/>
      <param falsevalue="" help="select known/novel sites only (ID is not/is '.')" label="Known" name="known" truevalue="--known" type="boolean"/>
      <param falsevalue="" help="select known/novel sites only (ID is not/is '.')" label="Novel" name="novel" truevalue="--novel" type="boolean"/>
      <param help="minimum/maximum number of alleles listed in REF and ALT (e.g. -m2 -M2 for biallelic sites)" label="Min Alleles" name="min_alleles" optional="True" type="integer"/>
      <param help="minimum/maximum number of alleles listed in REF and ALT (e.g. -m2 -M2 for biallelic sites)" label="Max Alleles" name="max_alleles" optional="True" type="integer"/>
      <param falsevalue="--exclude-phased" help="select/exclude sites where all samples are phased" label="Phased/Exclude Phased" name="phased_exclude_phased" truevalue="--phased" type="boolean"/>
      <param help="minimum/maximum frequency for non-reference (nref), 1st alternate (alt1), least frequent (minor), most frequent (major) or sum of all but most frequent (nonmajor) alleles [nref]" label="Min Af" name="min_af" optional="True" type="float"/>
      <param help="minimum/maximum frequency for non-reference (nref), 1st alternate (alt1), least frequent (minor), most frequent (major) or sum of all but most frequent (nonmajor) alleles [nref]" label="Max Af" name="max_af" optional="True" type="float"/>
      <param falsevalue="--exclude-uncalled" help="select/exclude sites without a called genotype" label="Uncalled/Exclude Uncalled" name="uncalled_exclude_uncalled" truevalue="--uncalled" type="boolean"/>
      <repeat name="types_exclude_types_repeat" title="Types_Exclude Types">
        <param help="select/exclude comma-separated list of variant types: snps,indels,mnps,other [null]" label="Types_Exclude Types" name="types_exclude_types"/>
      </repeat>
      <param falsevalue="--exclude-private" help="select/exclude sites where the non-reference alleles are exclusive (private) to the subset samples" label="Private/Exclude Private" name="private_exclude_private" truevalue="--private" type="boolean"/>
    </section>
  </inputs>
  <outputs/>
  <tests/>
  <help>VCF/BCF conversion, view, subset and filter VCF/BCF files.</help>
  <expand macro="citations"/>
</tool>
