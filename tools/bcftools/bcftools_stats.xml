<?xml version='1.0' encoding='utf-8'?>
<tool name="bcftools @EXECUTABLE@" id="bcftools_@EXECUTABLE@" version="@VERSION@.0">
  <description>Parses VCF or BCF and produces stats which can be plotted using plot-vcfstats</description>
  <macros>
    <token name="@EXECUTABLE@">stats</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements" />
  <expand macro="stdio" />
  <expand macro="version_command" />
  <command>bcftools @EXECUTABLE@

## Default section
${sec_default.1st_allele_only}
#if $sec_default.collapse:
  --collapse "${sec_default.collapse}"
#end if
#if $sec_default.depth:
  --depth "${sec_default.depth}"
#end if
#if $sec_default.exons:
  --exons "${sec_default.exons}"
#end if
#set values_sec_default_apply_filters = '","'.join([str($value) for $value in $sec_default.apply_filters_repeat])
#if $values_sec_default_apply_filters:
  --apply-filters "${values_sec_default_apply_filters}"
#end if
#if $sec_default.fasta_ref:
  --fasta-ref "${sec_default.fasta_ref}"
#end if
${sec_default.split_by_ID}
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if
#set values_sec_default_samples = '","'.join([str($value) for $value in $sec_default.samples_repeat])
#if $values_sec_default_samples:
  --samples "${values_sec_default_samples}"
#end if
#if $sec_default.samples_file:
  --samples-file "${sec_default.samples_file}"
#end if
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
#if $values_sec_default_targets:
  --targets "${values_sec_default_targets}"
#end if
#if $sec_default.targets_file:
  --targets-file "${sec_default.targets_file}"
#end if
#if $sec_default.user_tstv:
  --user-tstv "${sec_default.user_tstv}"
#end if
${sec_default.verbose}

## Primary Input/Outputs

</command>
  <inputs>
    <param name="input_file1" label="VCF/BCF Data" type="data" format="vcf,bcf" />
    <param name="input_file2" label="Second VCF/BCF Data" type="data" format="vcf,bcf" optional="True" />
    <section name="sec_default" expanded="true" title="Default Options">
      <param name="1st_allele_only" label="1St Allele Only" type="boolean" truevalue="--1st-allele-only" falsevalue="" help="include only 1st allele at multiallelic sites" />
      <expand macro="macro_collapse" />
      <param name="depth" label="Depth" __TODO__="TODO" help="depth distribution: min,max,bin size [0,500,1]" />
      <param name="exons" label="Exons" __TODO__="TODO" help="tab-delimited file with exons for indel frameshifts (chr,from,to; 1-based, inclusive, bgzip compressed)" />
      <expand macro="macro_apply_filters_repeat" />
      <param name="fasta_ref" label="Fasta Ref" type="data" format="data" optional="True" help="faidx indexed reference sequence file to determine INDEL context" />
      <param name="split_by_ID" label="Split By Id" type="boolean" truevalue="--split-by-ID" falsevalue="" help="collect stats for sites with ID separately (known vs novel)" />
      <expand macro="macro_regions" />
      <expand macro="macro_samples" />
      <expand macro="macro_targets" />
      <param name="user_tstv" label="User Tstv" __TODO__="TODO" help="collect Ts/Tv stats for any tag using the given binning [0:1:100]" />
      <param name="verbose" label="Verbose" type="boolean" truevalue="--verbose" falsevalue="" help="produce verbose per-site and per-sample output" />
    </section>
  </inputs>
  <outputs />
  <tests />
  <help>Parses VCF or BCF and produces stats which can be plotted using plot-vcfstats. When two files are given, the program generates separate stats for intersection and the complements. By default only sites are compared, -s/-S must given to include also sample columns.</help>
  <expand macro="citations" />
</tool>