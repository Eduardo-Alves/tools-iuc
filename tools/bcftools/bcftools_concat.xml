<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>Concatenate or combine VCF/BCF files</description>
  <macros>
    <token name="@EXECUTABLE@">concat</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
${sec_default.allow_overlaps}
${sec_default.remove_duplicates}
#if $sec_default.file_list:
  --file-list "${sec_default.file_list}"
#end if
${sec_default.ligate}
#if $sec_default.min_PQ:
  --min-PQ "${sec_default.min_PQ}"
#end if
#if $sec_default.output:
  --output "${sec_default.output}"
#end if
#if str($sec_default.select_output_type) != "__none__":
  --output-type "${sec_default.select_output_type}"
#end if
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if

## Primary Input/Outputs

</command>
  <inputs>
    <param format="vcf,bcf" label="VCF/BCF Data" name="input_file1" type="data"/>
    <param format="vcf,bcf" label="Other VCF/BCF Datasets" multiple="True" name="input_file2" type="data"/>
    <section expanded="true" name="sec_default" title="Default Options">
      <param falsevalue="" help="First coordinate of the next file can precede last record of the current file." label="Allow Overlaps" name="allow_overlaps" truevalue="--allow-overlaps" type="boolean"/>
      <param falsevalue="" help="Output only once records present in multiple files." label="Remove Duplicates" name="remove_duplicates" truevalue="--remove-duplicates" type="boolean"/>
      <param format="data" help="Read the list of files from a file." label="File List" name="file_list" optional="True" type="data"/>
      <param falsevalue="" help="Ligate phased VCFs by matching phase at overlapping haplotypes" label="Ligate" name="ligate" truevalue="--ligate" type="boolean"/>
      <param default="30" help="Break phase set if phasing quality is lower than &lt;int&gt;" label="Min Pq" name="min_PQ" optional="True" type="integer"/>
      <param format="data" help="Write output to a file [standard output]" label="Output" name="output" optional="True" type="data"/>
      <expand macro="macro_select_output_type"/>
      <expand macro="macro_regions_repeat"/>
      <expand macro="macro_regions_file"/>
    </section>
  </inputs>
  <outputs>
    <data format="vcf" name="output_file">
      <change_format>
        <when format="bcf_bgz" input="sec_default|select_output_type" value="b"/>
        <when format="bcf" input="sec_default|select_output_type" value="u"/>
        <when format="vcf_bgz" input="sec_default|select_output_type" value="z"/>
        <when format="vcf" input="sec_default|select_output_type" value="v"/>
      </change_format>
    </data>
  </outputs>
  <tests/>
  <help>Concatenate or combine VCF/BCF files. All source files must have the same sample columns appearing in the same order. Can be used, for example, to concatenate chromosome VCFs into one VCF, or combine a SNP VCF and an indel VCF into one. The input files must be sorted by chr and position. The files must be given in the correct order to produce sorted VCF on output unless the -a, --allow-overlaps option is specified.</help>
  <expand macro="citations"/>
</tool>
