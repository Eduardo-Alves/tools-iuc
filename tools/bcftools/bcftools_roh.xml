<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>HMM model for detecting runs of autozygosity.</description>
  <macros>
    <token name="@EXECUTABLE@">roh</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## General section
#if $sec_general.AF_tag:
  --AF-tag "${sec_general.AF_tag}"
#end if
#if $sec_general.AF_file:
  --AF-file "${sec_general.AF_file}"
#end if
#if $sec_general.estimate_AF:
  --estimate-AF "${sec_general.estimate_AF}"
#end if
#if $sec_general.GTs_only:
  --GTs-only "${sec_general.GTs_only}"
#end if
${sec_general.skip_indels}
#if $sec_general.genetic_map:
  --genetic-map "${sec_general.genetic_map}"
#end if
#if $sec_general.rec_rate:
  --rec-rate "${sec_general.rec_rate}"
#end if
#set values_sec_general_regions = '","'.join([str($value) for $value in $sec_general.regions_repeat])
#if $values_sec_general_regions:
  --regions "${values_sec_general_regions}"
#end if
#if $sec_general.regions_file:
  --regions-file "${sec_general.regions_file}"
#end if
#if $sec_general.sample:
  --sample "${sec_general.sample}"
#end if
#set values_sec_general_targets = '","'.join([str($value) for $value in $sec_general.targets_repeat])
#if $values_sec_general_targets:
  --targets "${values_sec_general_targets}"
#end if
#if $sec_general.targets_file:
  --targets-file "${sec_general.targets_file}"
#end if

## HMM section
#if $sec_hmm.hw_to_az:
  --hw-to-az "${sec_hmm.hw_to_az}"
#end if
#if $sec_hmm.az_to_hw:
  --az-to-hw "${sec_hmm.az_to_hw}"
#end if
${sec_hmm.viterbi_training}

## Primary Input/Outputs

$input_file
&gt;
$output_file</command>
  <inputs>
    <param format="vcf,bcf" label="VCF/BCF Data" name="input_file" type="data"/>
    <section expanded="true" name="sec_general" title="General Options">
      <param __TODO__="TODO" help="use TAG for allele frequency" label="Af Tag" name="AF_tag"/>
      <param format="data" help="read allele frequencies from file (CHR\tPOS\tREF,ALT\tAF)" label="Af File" name="AF_file" optional="True" type="data"/>
      <param format="data" help="calculate AC,AN counts on the fly, using either all samples (&quot;-&quot;) or samples listed in &lt;file&gt;" label="Estimate Af" name="estimate_AF" optional="True" type="data"/>
      <param help="use GTs, ignore PLs, use &lt;float&gt; for PL of unseen genotypes. Safe value to use is 30 to account for GT errors." label="Gts Only" name="GTs_only" optional="True" type="float"/>
      <param falsevalue="" help="skip indels as their genotypes are enriched for errors" label="Skip Indels" name="skip_indels" truevalue="--skip-indels" type="boolean"/>
      <param format="data" help="genetic map in IMPUTE2 format, single file or mask, where string &quot;{CHROM}&quot; is replaced with chromosome name" label="Genetic Map" name="genetic_map" optional="True" type="data"/>
      <param help="constant recombination rate per bp" label="Rec Rate" name="rec_rate" optional="True" type="float"/>
      <expand macro="macro_regions_repeat"/>
      <expand macro="macro_regions_file"/>
      <param __TODO__="TODO" help="sample to analyze" label="Sample" name="sample"/>
      <expand macro="macro_targets_repeat"/>
      <expand macro="macro_targets_file"/>
    </section>
    <section expanded="true" name="sec_hmm" title="HMM Options">
      <param default="1e-8" help="P(AZ|HW) transition probability from AZ (autozygous) to HW (Hardy-Weinberg) state" label="Hw To Az" name="hw_to_az" optional="True" type="float"/>
      <param default="1e-7" help="P(HW|AZ) transition probability from HW to AZ state" label="Az To Hw" name="az_to_hw" optional="True" type="float"/>
      <param falsevalue="" help="perform Viterbi training to estimate transition probabilities" label="Viterbi Training" name="viterbi_training" truevalue="--viterbi-training" type="boolean"/>
    </section>
  </inputs>
  <outputs/>
  <tests/>
  <help>HMM model for detecting runs of autozygosity.</help>
  <expand macro="citations"/>
</tool>
