<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>Apply fixed-threshold filters.</description>
  <macros>
    <token name="@EXECUTABLE@">filter</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
#if $sec_default.exclude:
  --exclude "${sec_default.exclude}"
#end if
#if $sec_default.SnpGap:
  --SnpGap "${sec_default.SnpGap}"
#end if
#if $sec_default.IndelGap:
  --IndelGap "${sec_default.IndelGap}"
#end if
#if $sec_default.include:
  --include "${sec_default.include}"
#end if
#if $sec_default.mode:
  --mode "${sec_default.mode}"
#end if
#if $sec_default.output:
  --output "${sec_default.output}"
#end if
#if str($sec_default.select_output_type) != "__none__":
  --output-type "${sec_default.select_output_type}"
#end if
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if
#if $sec_default.soft_filter:
  --soft-filter "${sec_default.soft_filter}"
#end if
#if str($sec_default.select_set_GTs) != "__none__":
  --set-GTs "${sec_default.select_set_GTs}"
#end if
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
#if $values_sec_default_targets:
  --targets "${values_sec_default_targets}"
#end if
#if $sec_default.targets_file:
  --targets-file "${sec_default.targets_file}"
#end if

## Primary Input/Outputs

$input_file
&gt;
$output_file</command>
  <inputs>
    <param format="vcf,bcf" label="VCF/BCF Data" name="input_file" type="data"/>
    <section expanded="true" name="sec_default" title="Default Options">
      <expand macro="macro_exclude"/>
      <param help="filter SNPs within &lt;int&gt; base pairs of an indel" label="Snpgap" name="SnpGap" optional="True" type="integer"/>
      <param help="filter clusters of indels separated by &lt;int&gt; or fewer base pairs allowing only one to pass" label="Indelgap" name="IndelGap" optional="True" type="integer"/>
      <param __TODO__="TODO" help="include only sites for which the expression is true (see man page for details" label="Include" name="include"/>
      <param __TODO__="TODO" help="&quot;+&quot;: do not replace but add to existing FILTER; &quot;x&quot;: reset filters at sites which pass" label="Mode" name="mode"/>
      <expand macro="macro_output"/>
      <expand macro="macro_select_output_type"/>
      <expand macro="macro_regions_repeat"/>
      <expand macro="macro_regions_file"/>
      <param help="annotate FILTER column with &lt;string&gt; or unique filter name (&quot;Filter%d&quot;) made up by the program (&quot;+&quot;)" label="Soft Filter" name="soft_filter" optional="True" type="string"/>
      <param name="select_set_GTs" type="select">
        <option selected="True" value="__none__">No selection</option>
        <option value="set genotypes of failed samples to missing (.) or ref (0)"/>
      </param>
      <expand macro="macro_targets_repeat"/>
      <expand macro="macro_targets_file"/>
    </section>
  </inputs>
  <outputs>
    <data format="vcf" name="output_file">
      <change_format>
        <when format="bcf_bgz" input="sec_default|select_output_type" value="b"/>
        <when format="bcf" input="sec_default|select_output_type" value="u"/>
        <when format="vcf_bgz" input="sec_default|select_output_type" value="z"/>
        <when format="vcf" input="sec_default|select_output_type" value="v"/>
      </change_format>
    </data>
  </outputs>
  <tests/>
  <help>Apply fixed-threshold filters.</help>
  <expand macro="citations"/>
</tool>
