<?xml version="1.0" encoding="utf-8"?>
<tool name="bcftools @EXECUTABLE@" id="bcftools_@EXECUTABLE@" version="@VERSION@.0">
  <description>Annotate and edit VCF/BCF files.</description>
  <macros>
    <token name="@EXECUTABLE@">annotate</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
#if $sec_default.annotations:
  --annotations "${sec_default.annotations}"
#end if
#set values_sec_default_columns = '","'.join([str($value) for $value in $sec_default.columns_repeat])
#if $values_sec_default_columns:
  --columns "${values_sec_default_columns}"
#end if
#if $sec_default.exclude:
  --exclude "${sec_default.exclude}"
#end if
#if $sec_default.header_lines:
  --header-lines "${sec_default.header_lines}"
#end if
#if $sec_default.set_id:
  --set-id "${sec_default.set_id}"
#end if
#if $sec_default.include:
  --include "${sec_default.include}"
#end if
#if $sec_default.output:
  --output "${sec_default.output}"
#end if
#if str($sec_default.select_output_type) != "__none__":
  --output-type "${sec_default.select_output_type}"
#end if
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if
#if $sec_default.rename_chrs:
  --rename-chrs "${sec_default.rename_chrs}"
#end if
#set values_sec_default_samples = '","'.join([str($value) for $value in $sec_default.samples_repeat])
#if $values_sec_default_samples:
  --samples "${sec_default.invert_samples}${values_sec_default_samples}"
#end if
#if $sec_default.samples_file:
  --samples-file "${sec_default.invert_samples_file}${sec_default.samples_file}"
#end if
#set values_sec_default_remove = '","'.join([str($value) for $value in $sec_default.remove_repeat])
#if $values_sec_default_remove:
  --remove "${values_sec_default_remove}"
#end if

## Primary Input/Outputs

$input_file
&gt;
$output_file</command>
  <inputs>
    <param name="input_file" label="VCF/BCF Data" type="data" format="vcf,bcf"/>
    <section name="sec_default" expanded="true" title="Default Options">
      <param name="annotations" label="Annotations" type="data" format="data" optional="True" help="VCF file or tabix-indexed file with annotations: CHR\tPOS[\tVALUE]+"/>
      <repeat name="columns_repeat" title="Columns">
        <param name="columns" label="Columns" help="list of columns in the annotation file, e.g. CHROM,POS,REF,ALT,-,INFO/TAG. See man page for details"/>
      </repeat>
      <expand macro="macro_exclude"/>
      <param name="header_lines" label="Header Lines" type="data" format="data" optional="True" help="lines which should be appended to the VCF header"/>
      <param name="set_id" label="Set Id" __TODO__="TODO" help="set ID column, see man pagee for details"/>
      <param name="include" label="Include" __TODO__="TODO" help="select sites for which the expression is true (see man pagee for details)"/>
      <expand macro="macro_select_output_type"/>
      <expand macro="macro_regions"/>
      <param name="rename_chrs" label="Rename Chrs" type="data" format="data" optional="True" help="rename sequences according to map file: from\tto"/>
      <expand macro="macro_samples_repeat"/>
      <expand macro="macro_invert_samples"/>
      <param name="samples_file" label="Samples File" type="data" format="data" optional="True" help="file of samples to annotate (or exclude with &quot;^&quot; prefix)"/>
      <expand macro="macro_invert_samples_file"/>
      <repeat name="remove_repeat" title="Remove">
        <param name="remove" label="Remove" help="list of annotations to remove (e.g. ID,INFO/DP,FORMAT/DP,FILTER). See man page for details"/>
      </repeat>
    </section>
  </inputs>
  <outputs>
    <data name="output_file" format="vcf">
      <change_format>
        <when input="sec_default|select_output_type" format="bcf_bgz" value="b"/>
        <when input="sec_default|select_output_type" format="bcf" value="u"/>
        <when input="sec_default|select_output_type" format="vcf_bgz" value="z"/>
        <when input="sec_default|select_output_type" format="vcf" value="v"/>
      </change_format>
    </data>
  </outputs>
  <tests/>
  <help>Annotate and edit VCF/BCF files.</help>
  <expand macro="citations"/>
</tool>
