<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>Annotate and edit VCF/BCF files.</description>
  <macros>
    <token name="@EXECUTABLE@">view</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
--annotations "${sec_default.annotations}"
#set values_sec_default_columns = '","'.join([str($value) for $value in $sec_default.columns_repeat])
--columns "${values_sec_default_columns}"
--exclude "${sec_default.exclude}"
--header-lines "${sec_default.header_lines}"
--set-id "${sec_default.set_id}"
--include "${sec_default.include}"
--output "${sec_default.output}"
--output-type "${sec_default.select_output_type}"
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
--regions "${values_sec_default_regions}"
--regions-file "${sec_default.regions_file}"
--rename-chrs "${sec_default.rename_chrs}"
#set values_sec_default_samples = '","'.join([str($value) for $value in $sec_default.samples_repeat])
--samples "${sec_default.invert_samples}${values_sec_default_samples}"
--samples-file "${sec_default.invert_samples_file}${sec_default.samples_file}"
#set values_sec_default_remove = '","'.join([str($value) for $value in $sec_default.remove_repeat])
--remove "${values_sec_default_remove}"
</command>
  <inputs>
    <section expanded="true" name="sec_default" title="Default Options">
      <param format="data" help="VCF file or tabix-indexed file with annotations: CHR\tPOS[\tVALUE]+" label="Annotations" name="annotations" optional="True" type="data"/>
      <repeat name="columns_repeat" title="Columns">
        <param help="list of columns in the annotation file, e.g. CHROM,POS,REF,ALT,-,INFO/TAG. See man page for details" label="Columns" name="columns"/>
      </repeat>
      <param help="exclude sites for which the expression is true (see man page for details)" label="Exclude" name="exclude"/>
      <param format="data" help="lines which should be appended to the VCF header" label="Header Lines" name="header_lines" optional="True" type="data"/>
      <param help="set ID column, see man pagee for details" label="Set Id" name="set_id"/>
      <param help="select sites for which the expression is true (see man pagee for details)" label="Include" name="include"/>
      <param format="data" help="write output to a file [standard output]" label="Output" name="output" optional="True" type="data"/>
      <param name="select_output_type" type="select">
        <option value="b">compressed BCF</option>
        <option value="u">uncompressed BCF</option>
        <option value="z">compressed VCF</option>
        <option selected="True" value="v">uncompressed VCF</option>
      </param>
      <repeat name="regions_repeat" title="Regions">
        <param help="restrict to comma-separated list of regions" label="Regions" name="regions"/>
      </repeat>
      <param format="data" help="restrict to regions listed in a file" label="Regions File" name="regions_file" optional="True" type="data"/>
      <param format="data" help="rename sequences according to map file: from\tto" label="Rename Chrs" name="rename_chrs" optional="True" type="data"/>
      <repeat name="samples_repeat" title="Samples">
        <param help="comma separated list of samples to annotate (or exclude with &quot;^&quot; prefix)" label="Samples" name="samples"/>
      </repeat>
      <param falsevalue="" help="inverts the query/filtering applied by Samples" label="Invert Samples" name="invert_samples" truevalue="^" type="boolean"/>
      <param format="data" help="file of samples to annotate (or exclude with &quot;^&quot; prefix)" label="Samples File" name="samples_file" optional="True" type="data"/>
      <param falsevalue="" help="inverts the query/filtering applied by Samples File" label="Invert Samples File" name="invert_samples_file" truevalue="^" type="boolean"/>
      <repeat name="remove_repeat" title="Remove">
        <param help="list of annotations to remove (e.g. ID,INFO/DP,FORMAT/DP,FILTER). See man page for details" label="Remove" name="remove"/>
      </repeat>
    </section>
  </inputs>
  <outputs/>
  <tests/>
  <help>Annotate and edit VCF/BCF files.</help>
  <expand macro="citations"/>
</tool>
