<?xml version="1.0"?>
<tool id="bcftools_@EXECUTABLE@" name="bcftools @EXECUTABLE@" version="@VERSION@.0">
  <description>Left-align and normalize indels; check if REF alleles match the reference; split multiallelic sites into multiple rows; recover multiallelics from multiple rows.</description>
  <macros>
    <token name="@EXECUTABLE@">view</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
--check-ref "${sec_default.select_check_ref}"
${sec_default.remove_duplicates}
--fasta-ref "${sec_default.fasta_ref}"
--multiallelics "${sec_default.select_multiallelics}"
--output "${sec_default.output}"
--output-type "${sec_default.output_type}"
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
--regions "${values_sec_default_regions}"
--regions-file "${sec_default.regions_file}"
${sec_default.strict_filter}
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
--targets "${values_sec_default_targets}"
--targets-file "${sec_default.targets_file}"
--site-win "${sec_default.site_win}"
</command>
  <inputs>
    <section expanded="true" name="sec_default" title="Default Options">
      <param name="select_check_ref" type="select">
        <option value="check REF alleles and exit (e)"/>
        <option value="warn (w)"/>
        <option value="exclude (x) bad sites"/>
      </param>
      <param falsevalue="" help="remove duplicate lines of the same type." label="Remove Duplicates" name="remove_duplicates" truevalue="--remove-duplicates" type="boolean"/>
      <param format="data" help="reference sequence" label="Fasta Ref" name="fasta_ref" optional="True" type="data"/>
      <param name="select_multiallelics" type="select">
        <option value="split multiallelics (-) or join biallelics (+)"/>
        <option value="type">snps|indels|both|any</option>
      </param>
      <param format="data" help="write output to a file [standard output]" label="Output" name="output" optional="True" type="data"/>
      <param help="'b' compressed BCF; 'u' uncompressed BCF; 'z' compressed VCF; 'v' uncompressed VCF [v]" label="Output Type" name="output_type"/>
      <repeat name="regions_repeat" title="Regions">
        <param help="restrict to comma-separated list of regions" label="Regions" name="regions"/>
      </repeat>
      <param format="data" help="restrict to regions listed in a file" label="Regions File" name="regions_file" optional="True" type="data"/>
      <param falsevalue="" help="when merging (-m+), merged site is PASS only if all sites being merged PASS" label="Strict Filter" name="strict_filter" truevalue="--strict-filter" type="boolean"/>
      <repeat name="targets_repeat" title="Targets">
        <param help="similar to -r but streams rather than index-jumps" label="Targets" name="targets"/>
      </repeat>
      <param format="data" help="similar to -R but streams rather than index-jumps" label="Targets File" name="targets_file" optional="True" type="data"/>
      <param default="1000" help="buffer for sorting lines which changed position during realignment" label="Site Win" name="site_win" optional="True" type="integer"/>
    </section>
  </inputs>
  <outputs/>
  <tests/>
  <help>Left-align and normalize indels; check if REF alleles match the reference; split multiallelic sites into multiple rows; recover multiallelics from multiple rows.</help>
  <expand macro="citations"/>
</tool>
