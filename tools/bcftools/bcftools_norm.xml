<?xml version='1.0' encoding='utf-8'?>
<tool name="bcftools @EXECUTABLE@" id="bcftools_@EXECUTABLE@" version="@VERSION@.0">
  <description>Left-align and normalize indels; check if REF alleles match the reference; split multiallelic sites into multiple rows; recover multiallelics from multiple rows.</description>
  <macros>
    <token name="@EXECUTABLE@">norm</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements" />
  <expand macro="stdio" />
  <expand macro="version_command" />
  <command>bcftools @EXECUTABLE@

## Default section
#if str($sec_default.select_check_ref) != "__none__":
  --check-ref "${sec_default.select_check_ref}"
#end if
${sec_default.remove_duplicates}
#if $sec_default.fasta_ref:
  --fasta-ref "${sec_default.fasta_ref}"
#end if
#if str($sec_default.select_multiallelics) != "__none__":
  --multiallelics "${sec_default.select_multiallelics}"
#end if
#if $sec_default.output:
  --output "${sec_default.output}"
#end if
#if str($sec_default.select_output_type) != "__none__":
  --output-type "${sec_default.select_output_type}"
#end if
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if
${sec_default.strict_filter}
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
#if $values_sec_default_targets:
  --targets "${values_sec_default_targets}"
#end if
#if $sec_default.targets_file:
  --targets-file "${sec_default.targets_file}"
#end if
#if $sec_default.site_win:
  --site-win "${sec_default.site_win}"
#end if

## Primary Input/Outputs

$input_file
&gt;
$output_file</command>
  <inputs>
    <param name="input_file" label="VCF/BCF Data" type="data" format="vcf,bcf" />
    <section name="sec_default" expanded="true" title="Default Options">
      <param name="select_check_ref" type="select">
        <option value="check REF alleles and exit (e)" />
        <option value="warn (w)" />
        <option value="exclude (x) bad sites" />
      </param>
      <param name="remove_duplicates" label="Remove Duplicates" type="boolean" truevalue="--remove-duplicates" falsevalue="" help="remove duplicate lines of the same type." />
      <param name="fasta_ref" label="Fasta Ref" type="data" format="data" optional="True" help="reference sequence" />
      <param name="select_multiallelics" type="select">
        <option value="split multiallelics (-) or join biallelics (+)" />
        <option value="type">snps|indels|both|any</option>
      </param>
      <expand macro="macro_select_output_type" />
      <expand macro="macro_regions" />
      <param name="strict_filter" label="Strict Filter" type="boolean" truevalue="--strict-filter" falsevalue="" help="when merging (-m+), merged site is PASS only if all sites being merged PASS" />
      <expand macro="macro_targets" />
      <param name="site_win" label="Site Win" type="integer" default="1000" optional="True" help="buffer for sorting lines which changed position during realignment" />
    </section>
  </inputs>
  <outputs>
    <data name="output_file" format="vcf">
      <change_format>
        <when input="sec_default|select_output_type" format="bcf_bgz" value="b" />
        <when input="sec_default|select_output_type" format="bcf" value="u" />
        <when input="sec_default|select_output_type" format="vcf_bgz" value="z" />
        <when input="sec_default|select_output_type" format="vcf" value="v" />
      </change_format>
    </data>
  </outputs>
  <tests />
  <help>Left-align and normalize indels; check if REF alleles match the reference; split multiallelic sites into multiple rows; recover multiallelics from multiple rows.</help>
  <expand macro="citations" />
</tool>