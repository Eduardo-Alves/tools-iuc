<?xml version="1.0" encoding="utf-8"?>
<tool name="bcftools @EXECUTABLE@" id="bcftools_@EXECUTABLE@" version="@VERSION@.0">
  <description>Create intersections, unions and complements of VCF files.</description>
  <macros>
    <token name="@EXECUTABLE@">isec</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <expand macro="version_command"/>
  <command>bcftools @EXECUTABLE@

## Default section
#if $sec_default.collapse:
  --collapse "${sec_default.collapse}"
#end if
${sec_default.complement}
#if $sec_default.exclude:
  --exclude "${sec_default.exclude}"
#end if
#set values_sec_default_apply_filters = '","'.join([str($value) for $value in $sec_default.apply_filters_repeat])
#if $values_sec_default_apply_filters:
  --apply-filters "${values_sec_default_apply_filters}"
#end if
#if $sec_default.include:
  --include "${sec_default.include}"
#end if
#if $sec_default.nfiles:
  --nfiles "${sec_default.nfiles}"
#end if
#if $sec_default.output:
  --output "${sec_default.output}"
#end if
#if str($sec_default.select_output_type) != "__none__":
  --output-type "${sec_default.select_output_type}"
#end if
#if $sec_default.prefix:
  --prefix "${sec_default.prefix}"
#end if
#set values_sec_default_regions = '","'.join([str($value) for $value in $sec_default.regions_repeat])
#if $values_sec_default_regions:
  --regions "${values_sec_default_regions}"
#end if
#if $sec_default.regions_file:
  --regions-file "${sec_default.regions_file}"
#end if
#set values_sec_default_targets = '","'.join([str($value) for $value in $sec_default.targets_repeat])
#if $values_sec_default_targets:
  --targets "${values_sec_default_targets}"
#end if
#if $sec_default.targets_file:
  --targets-file "${sec_default.targets_file}"
#end if
#set values_sec_default_write = '","'.join([str($value) for $value in $sec_default.write_repeat])
#if $values_sec_default_write:
  --write "${values_sec_default_write}"
#end if

## Primary Input/Outputs

</command>
  <inputs>
    <param name="input_file1" label="VCF/BCF Data" type="data" format="vcf,bcf"/>
    <param name="input_file2" label="Other VCF/BCF Datasets" type="data" format="vcf,bcf" multiple="True"/>
    <section name="sec_default" expanded="true" title="Default Options">
      <expand macro="macro_collapse"/>
      <param name="complement" label="Complement" type="boolean" truevalue="--complement" falsevalue="" help="output positions present only in the first file but missing in the others"/>
      <param name="exclude" label="Exclude" __TODO__="TODO" help="exclude sites for which the expression is true"/>
      <expand macro="macro_apply_filters_repeat"/>
      <param name="include" label="Include" __TODO__="TODO" help="include only sites for which the expression is true"/>
      <param name="nfiles" label="Nfiles" type="integer" optional="True" help="output positions present in this many (=), this many or more (+), or this many or fewer (-) files"/>
      <expand macro="macro_select_output_type"/>
      <param name="prefix" label="Prefix" __TODO__="TODO" help="if given, subset each of the input files accordingly, see also -w"/>
      <expand macro="macro_regions"/>
      <expand macro="macro_targets_repeat"/>
      <expand macro="macro_targets_file"/>
      <repeat name="write_repeat" title="Write">
        <param name="write" label="Write" help="list of files to write with -p given as 1-based indexes. By default, all files are written"/>
      </repeat>
    </section>
  </inputs>
  <outputs>
    <data name="output_file" format="vcf">
      <change_format>
        <when input="sec_default|select_output_type" format="bcf_bgz" value="b"/>
        <when input="sec_default|select_output_type" format="bcf" value="u"/>
        <when input="sec_default|select_output_type" format="vcf_bgz" value="z"/>
        <when input="sec_default|select_output_type" format="vcf" value="v"/>
      </change_format>
    </data>
  </outputs>
  <tests/>
  <help>Create intersections, unions and complements of VCF files.</help>
  <expand macro="citations"/>
</tool>
