<tool id="gemini_@BINARY@" name="GEMINI @BINARY@" version="@VERSION@.0">
    <description>Retrieve genes with actionable somatic mutations via COSMIC and DGIdb</description>
    <macros>
        <import>gemini_macros.xml</import>
        <token name="@BINARY@">actionable_mutations</token>
    </macros>
    <expand macro="requirements" />
    <expand macro="stdio" />
    <expand macro="version_command" />
    <command>
<![CDATA[
        gemini @BINARY@
            "${ infile }" | tr -s ' ' '\t'
            > "${ outfile }"
]]>
    </command>
    <inputs>
        <expand macro="infile" />
    </inputs>
    <outputs>
        <data name="outfile" format="tabular" />
    </outputs>
    <tests>
        <test>
            <!-- Like in set_somatic this example is nonsensical because otherwise
                the testdata would be too big.-->
            <param name="infile" value="gemini_comphets_input.db" ftype="gemini.sqlite" />
            <output name="outfile" file="gemini_actionable_mutations_result.tabular" />
        </test>
    </tests>
    <help><![CDATA[
**What it does**

Retrieve genes with actionable somatic mutations via COSMIC and DGIdb. The command::

 SELECT variants.chrom, start, end, ref, alt, variants.gene, impact, is_somatic, gene_summary.in_cosmic_census
 FROM variants, gene_summary 
 WHERE variants.is_somatic = 1 
 AND (variants.type = 'snp' 
 OR variants.type = 'indel') 
 AND (variants.impact_severity = 'HIGH' 
 OR variants.impact_severity = 'MED') 
 AND variants.chrom = gene_summary.chrom 
 AND variants.gene = gene_summary.gene 
 AND gene_summary.in_cosmic_census = 1"


is run. And the results are then compared to entries in COSMIC and DGIdb
    ]]></help>
    <expand macro="citations"/>
</tool>
