<tool id="bp_@EXECUTABLE@" name="BioPerl @EXECUTABLE@" version="1.0">
  <description>convert genbank to gff3</description>
  <macros>
      <import>macros.xml</import>
      <token name="@EXECUTABLE@">genbank2gff3</token>
  </macros>
  <expand macro="stdio" />
  <command><![CDATA[
bp_genbank2gff3.pl
$noinfer
#if str($sofile.sofile) != "__none__":
    --sofile
    #if str($sofile.sofile) == "url":
        "${sofile.so_url}"
    #else:
        live
    #end if
#end if
--outdir -
--ethresh $ethresh
$model
--typesource $typesource

$genbank
> $gff3]]></command>
  <inputs>
    <param label="Genbank file" name="genbank" type="data" format="gb"/>
    <param name="noinfer" truevalue="" falsevalue="--noinfer" default="true" type="boolean" label="Infer exon/mRNA subfeatures"/>
    <conditional name="sofile" label="Sequence Ontology">
        <param name="sofile" label="Sequence Ontology File" type="select">
            <option value="__none__" selected="True">None specified</option>
            <option value="live">Latest SO</option>
            <option value="url">User Specified</option>
        </param>
        <when value="__none__" />
        <when value="live" />
        <when value="url">
            <param name="so_url" label="Sequence Ontology URL" type="text"/>
        </when>
    </conditional>
    <param name="ethresh" label="Error threshold for unflattener" type="select">
        <option value="0">Strict</option>
        <option value="1" selected="True">Medium</option>
        <option value="2">Loose</option>
        <option value="3">Ignore Errors</option>
    </param>
    <param name="model" label="Gene Model" type="select">
        <option value="--CDS">Default GFF gene model</option>
        <option value="--noCDS">Alternate gene-RNA-protein-exon model</option>
    </param>
    <param name="typesource" label="SO Sequence type for source" help="E.g. chromosome, region, contig" value="contig" type="text" />
  </inputs>
  <outputs>
    <data format="gff3" name="gff3" label="${genbank.name} as GFF3"/>
  </outputs>
  <help><![CDATA[
**What it does**:

Convert genbank to gff3
      ]]></help>
</tool>
